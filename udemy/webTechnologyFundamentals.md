# 반드시 알고 넘어가야할 웹 기술 기초편

## OT

- 추천도서
  - 그림으로 배우는 HTTP&Network Basic
  - 성공과 실패를 결정하는 1%의 네트워크 원리
  - HTTP 완벽 가이드
  - 러닝 HTTP/2: 핵심만 쏙쏙, HTTP/2 적용 실무 가이드
- 웹 기초 지식 -> 웹 어플리케이션 이해 -> 어플리케이션 로직 -> 취약점 이해 -> 대응책 수립 가능

## 1. 웹의 탄생 그리고 발전

### World Wide Web: www

- 다수의 네트워크가 모여 형성된 공간
- 디비이스에 대한 제약 없이 클라이언트 프로그램을 통해서 접근 가능

### 탄생(웹1.0 1994~2004)

- 팀 버너스 리: 하이퍼 텍스트 중심의 문서 공유를 위한 도구로 시작
  - 문서: Hyper Text Markup Language(HTML)
  - 통신: HyperText Transfer Protocol(HTTP)
  - 주소: Uniform Resource Locator(URL)
  - 브라우저: 월드와이드웹->넥서스

### 발전

- 웹1.0 서버에서 파일을 제공만 하던 시절
- 웹2.0 이용자의 참여와 공유가 가능해짐
- 웹3.0 시맨틱 웹
- 웹4.0 유비쿼터스 웹

### 웹 브라우저의 탄생과 발전

- 브라우저의 발전에 따라서 단순 문서(HTML) 이상의 것(CSS, JavaScript 등)을 주고 받을 수 있게 됨
- 익스플로러, 크롬, 사파리, 파이어폭스, 오페라, 웨일, 삼성모바일웹 등 다양한 브라우저가 있음

## 2. 웹을 구성하는 3대 요소

### 웹의 기본구조

- 클라이언트/서버 구조
  - 클라이언트: 브라우저
  - 서버: 서비스 제공자
    - 웹 서버
    - 웹 어플리케이션 서버(WAS)
- 클라이언트의 서비스 요청에 따라 서버가 응답하는 형태
  - HTTP request
  - HTTP response

### 웹의 3대 요소

- 팀 버너스 리 고안
- HTML, HTTP, URL

## 3. 자원을 지정하는 URL

- 통합 자원 지시자: 리소스를 가리키는 표준 명칭

### 동작원리

- 서버의 자원을 요청할 때 사용
- HTTP, FTP, SMTP 관련 자원 요청도 가능함.
- 호출시 디렉터리로 끝나는 경우 `index.html`를 호출하게 됨

### 구조 분석 (http://www.domain.com/delectory/file.png)

- [1] 스키마(http) + `://`
- [2] 도메인/IP + `/`
- [3] 디렉터리 + `/`
- [4] 요창 자원의 이름

### URL 예약 문자

- `?` : 파라미터가 시작 된다는 것을 알려줌(get)
- `=` : 파라미터 값 대입
- `&` : 다음 파라미터 식별자
- `+` : 공백

### URL 인코딩

- URL상에서 문자를 표현하는 방법으로 데이터 손실을 막기 위함
- 예약문자로 사용되는 문자를 단순 문자로 전송하기 위해서
  - `&` : %26
  - `%` : %25
  - `+` : %2B
  - `공백` : %20
  - `=` : %2D
  - `#` : %23
  - `'` : %27
  - `?` : %3F

## 4. URL 예약문자 URL 인코등

- 클라이언트 -> 서버
- GET 요청시 URL에 데이터가 담겨서 전달 됨

## 5. 쿠키와 세션

- 상태 유지 및 관리
- 사용자 인증 수단
- 지속쿠키 -> 쿠키
- 세션쿠키 -> 세션

### 쿠키

- 쿠키 헤더 구조
  - Set-cookie
- 서버의 HTTP res 내 Set-cookie와 함께 저장 정보를 담아서 클라이언트로 내려 줌
- 클라이언트에 텍스트 형태로 저장 됨
- 클라이언트가 서버에 요청시 HTTP req에 쿠키를 담아서 요청함
- 쿠키의 유효기간, 알고리즘 등의 적절성을 생각해야 함 -> 쿠키 발급 로직 설계

### 세션

- 웹 서버에서 세션에 대한 정보를 자장하고, 클라이언트에게 session id를 쿠키로 내림
- 클라이언트에서 요청시 session id를 함께 보내고, 서버는 사용자의 세션을 특정할 수 있다.

* 쿠키대비 편라하나 서버에 큰 부하를 주게 됨

## 6. 웹의 핵심기술 HTTP

- 팀 버너스 리에 의해 개발
- HTTP/0.9: 정식 사양 아니고, GET 메소드만 지원
- HTTP/1.0
  - POST, HEAD, 헤더를 지원 응답 상태코드를 추가
  - 요청마나 연결을 연결하고 끊고 다시 새로운 연결을 하는 비연결 지향 방식
- HTTP/1.0+
  - Keep-Alive 커넥션을 지원
- HTTP/1.1
  - PUT, OPTIONS, DELETE 등 메소드 추가
  - Keep-Alive 기본값
- HTTP/2.0

### OSI 계층모델 vs TCP/IP 계층모델

- TCP/IP: 현실 모델
  - 3-way hand shake
  - data trans
  - 응용계층: 웹 브라우저
  - 전송계층: port
  - 인터넷 계층: IP
- 연결관리
  - 지속 연결: Connection: Keep-Alive
  - 비 지속 연결: 상호 요청이 빈번하지 않았던 시절이기 때문에 1.0 까지 사용되었는데, 지금 보면 비효율적임

### HTTP 메시지

- 요청메시지: 요청라인 `\r\n` 메시지 헤더 ` \r\n``\r\n ` 메시지 바디
- 응답메시지: 상태라인 `\r\n` 메시지 헤더 ` \r\n``\r\n ` 메시지 바디
- GET/POST 메소드
  -post에는 Content-Type:
- 상태코드 분류
  - 1XX 정보
  - 2XX 성공
  - 3XX 리다이렉션
  - 4XX 클라이언트 에러
  - 5XX 서버에러
- 상태코드
  - 200 OK 정상적으로 처리 됨
  - 302 Found 다른 페이지로 이동
  - 304 Not Modified 수정되지 않음
  - 400 Bad Request 클라이언트 요청 에러
  - 403 Forbidden 접근 권한 없음
  - 404 Not Found 존재하지 않음
  - 500 Internal Server Error 서버 측 에러

## 7. 웹 아키텍처 분석

### 웹 아키텍처 동작 원리 분석

- 클라이언트
  1. 웹 사이트 접속 - URL 입력
  2. 도메인 IP 변환
     - 로컬 DNS 캐시 확인 -> hosts 파일 참조 -> DNS 서버 질의
  3. HTTP 요청 메시지 제작
  4. 패킷 인캡슐레이션: MAC+IP+TCP+HTTP
  5. 웹 서버와 HTTP 통신
     - TCP/IP 통신
     - 3-way hand shake
- 웹서버
  1. HTTP 응답 메시지 제작
- 클라이언트
  1. 응답 메시지 해석
  2. HTML 랜더
  3. img, css 요청
  4. js 요청
  5. 추가 내용 랜더

### Ajax 웹 모델

- 단일 파일에서 일부분만 교체할 수 있어 효율적
- 클라이언트의 발달로 서버의 부담을 낮출 수 있게 됨
  (단, 웹개발자가 클라이언트의 퍼포먼스를 제어 할 수 없다.)

### 서버

- 2-Tier(IIS, Ap, NGiNX)
  - 웹 서버
  - 데이터베이스
- 3-Tier(JWA)
  - 웹 서버(WS): 정적 자원 처리
  - 어플리케이션 웹 서버(WAS): 동적 자원 처리
  - 데이터베이스

### Client-Side Scrip

- 사용자 클라이언트에서 임의로 변경이 가능해 보안에 취약할 수 있다.
